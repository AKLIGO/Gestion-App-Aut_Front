<div class="p-6 max-w-md mx-auto bg-white rounded-xl shadow-lg space-y-6">
  <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Ajouter une image à un véhicule</h2>

  <!-- Sélection du véhicule -->
  <div>
    <label class="block mb-2 font-medium text-gray-700">Sélectionner le véhicule :</label>
    <select [(ngModel)]="immatriculationVehicule"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      <option value="" disabled selected>-- Choisir un véhicule --</option>
      <option *ngFor="let v of vehicules" [value]="v.immatriculation">
        {{ v.immatriculation }} - {{ v.marque }}
      </option>
    </select>
  </div>

  <!-- Libellé -->
  <div>
    <label class="block mb-2 font-medium text-gray-700">Libellé de l’image :</label>
    <input type="text" [(ngModel)]="libelle" placeholder="ex: Photo avant"
           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/>
  </div>

  <!-- Fichier -->
  <div>
    <label class="block mb-2 font-medium text-gray-700">Choisir une image :</label>
    <input type="file" (change)="onFileSelected($event)"
           class="w-full border border-gray-300 rounded-lg px-3 py-2 cursor-pointer
                  hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500"/>
  </div>

  <!-- Preview de l'image -->
  <div *ngIf="file" class="text-center">
    <p class="mb-2 font-medium text-gray-700">Aperçu :</p>
    <img [src]="file ? (file | filePreview) : ''" alt="Preview" class="mx-auto max-h-48 rounded-md shadow-sm"/>
  </div>

  <!-- Bouton -->
  <div class="text-center">
    <button (click)="uploadImage()"
            class="bg-blue-600 text-white font-semibold px-6 py-2 rounded-lg shadow-md
                   hover:bg-blue-700 transition-colors duration-300">
      Envoyer
    </button>
  </div>

  <!-- Message de succès / erreur -->
  <p *ngIf="message" 
     [ngClass]="{'text-green-600': isSuccess, 'text-red-600': !isSuccess}"
     class="text-center font-medium">
    {{ message }}
  </p>
</div>

<!-- Tableau des images -->
<div class="mt-8">
  <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">Liste des images des véhicules</h3>

  <table class="min-w-full border border-gray-300 rounded-lg shadow-sm">
    <thead class="bg-gray-100 text-gray-700">
      <tr>
        <th class="px-4 py-2 border">#</th>
        <th class="px-4 py-2 border">Libellé</th>
        <th class="px-4 py-2 border">Véhicule</th>
        <th class="px-4 py-2 border">Aperçu</th>
        <th class="px-4 py-2 border">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let img of imagesVehicules; let i = index" class="hover:bg-gray-50">
        <td class="px-4 py-2 border text-center">{{ i + 1 }}</td>
        <td class="px-4 py-2 border">{{ img.libelle }}</td>
        <td class="px-4 py-2 border">{{ getImmatriculationFromId(img.vehiculeId) }}</td>
        <td class="px-4 py-2 border text-center">
          <img [src]="getImageUrl(img)" alt="aperçu" class="h-16 mx-auto rounded-md shadow-sm" />
        </td>
         <td class="px-4 py-2 border text-center space-x-2">
          <button (click)="editImage(img)" class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600">
            Modifier
          </button>
          <button (click)="deleteImage(img.id)" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">
            Supprimer
          </button>
        </td> 
      </tr>
    </tbody>
  </table>
</div>

